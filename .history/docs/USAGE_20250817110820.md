# üéØ Guide d'utilisation complet

> **Ma√Ætrisez le G√©n√©rateur Firebase + Next.js 2025 de A √† Z**

## üìã Pr√©requis

> **üí° Avant de commencer :** Assurez-vous d'avoir suivi le [Guide d'installation](INSTALLATION.md) pour installer et configurer le g√©n√©rateur.

- ‚úÖ **G√©n√©rateur install√©** : `firebase-nextjs-generator --version`
- ‚úÖ **Firebase CLI connect√©** : `firebase login`
- ‚úÖ **Git configur√©** : `git --version`

## üöÄ Premiers pas

### 1. V√©rification de l'installation

```bash
# V√©rifier que le g√©n√©rateur est install√©
firebase-nextjs-generator --version

# Afficher l'aide
firebase-nextjs-generator --help
```

### 2. Premi√®re g√©n√©ration

```bash
# G√©n√©ration interactive (recommand√©e pour d√©buter)
firebase-nextjs-generator create

# Ou avec des options de base
firebase-nextjs-generator create --name my-first-app
```

## üìù Processus de g√©n√©ration d√©taill√©

### √âtape 1 : Configuration du projet

Le g√©n√©rateur vous demandera les informations suivantes :

```bash
? Nom du projet: my-awesome-app
? Description: Une application moderne avec Firebase et Next.js
? Version: 1.0.0
? Auteur: Votre Nom <votre.email@example.com>
```

**Conseils :**

- **Nom** : Utilisez des tirets, pas d'espaces
- **Description** : Soyez pr√©cis pour la documentation
- **Version** : Suivez le semver (1.0.0, 1.0.1, etc.)

### √âtape 2 : Configuration Next.js

```bash
? Version de Next.js: 15.0.0
? Framework UI:
  ‚ùØ Material-UI (MUI)
    Shadcn/ui
? Gestion d'√©tat:
  ‚ùØ Zustand
    Redux Toolkit
? Fonctionnalit√©s avanc√©es:
  ‚ùØ PWA (Progressive Web App)
  ‚ùØ FCM (Firebase Cloud Messaging)
  ‚ùØ Analytics
  ‚ùØ Performance Monitoring
  ‚ùØ Sentry (Error Monitoring)
```

**Explications :**

#### **Framework UI**

- **Material-UI (MUI)** : Composants Material Design pr√™ts √† l'emploi
- **Shadcn/ui** : Composants headless personnalisables

#### **Gestion d'√©tat**

- **Zustand** : L√©ger et simple, parfait pour la plupart des projets
- **Redux Toolkit** : Puissant et structur√©, id√©al pour les gros projets

#### **Fonctionnalit√©s avanc√©es**

- **PWA** : Application web installable avec cache offline
- **FCM** : Notifications push en temps r√©el
- **Analytics** : Suivi des utilisateurs et √©v√©nements
- **Performance** : Monitoring des performances
- **Sentry** : D√©tection et reporting d'erreurs

### √âtape 3 : Configuration Firebase

```bash
? Environnements √† configurer:
  ‚ùØ dev
  ‚ùØ staging
  ‚ùØ prod

? Pour l'environnement 'dev':
  ? Type de projet Firebase:
    ‚ùØ Lier un projet existant
      Cr√©er un nouveau projet
```

#### **Liaison √† un projet existant**

```bash
? ID du projet Firebase existant: my-existing-project
? V√©rification de la connexion Firebase...
‚úÖ Connexion Firebase active
? V√©rification du projet...
‚úÖ Projet trouv√©: my-existing-project
‚úÖ R√©gion d√©tect√©e: us-central1
```

#### **Cr√©ation d'un nouveau projet**

```bash
? Pr√©fixe du projet: my-app
? ID du projet g√©n√©r√©: my-app-dev
? R√©gion Firebase:
  ‚ùØ us-central1 (Iowa)
    us-east1 (South Carolina)
    europe-west1 (Belgium)
    asia-northeast1 (Tokyo)
```

**R√©gions recommand√©es :**

- **us-central1** : D√©faut, bonne performance
- **europe-west1** : Pour l'Europe
- **asia-northeast1** : Pour l'Asie

### √âtape 4 : Configuration des Cloud Functions

```bash
? Runtime Node.js: nodejs20
? R√©gion des fonctions: us-central1
? Triggers √† configurer:
  ‚ùØ Auth (Cr√©ation/suppression utilisateur)
  ‚ùØ Firestore (Cr√©ation/modification/suppression documents)
  ‚ùØ Storage (Upload/suppression fichiers)
  ‚ùØ HTTP (API REST, health checks)
  ‚ùØ Scheduled (T√¢ches programm√©es)
```

#### **Triggers d√©taill√©s**

##### **Auth Triggers**

- **user-created** : Cr√©ation automatique du profil utilisateur
- **user-updated** : Synchronisation des donn√©es utilisateur
- **user-deleted** : Nettoyage des donn√©es utilisateur

##### **Firestore Triggers**

- **document-created** : Logs d'audit, notifications
- **document-updated** : Validation, synchronisation
- **document-deleted** : Nettoyage, archives

##### **Storage Triggers**

- **file-uploaded** : Traitement d'images, g√©n√©ration de thumbnails
- **file-deleted** : Nettoyage des r√©f√©rences

##### **HTTP Triggers**

- **health** : Monitoring de l'application
- **api** : Endpoints REST personnalis√©s

##### **Scheduled Triggers**

- **daily-cleanup** : Nettoyage des logs anciens
- **weekly-backup** : Sauvegarde automatique

### √âtape 5 : Extensions Firebase

```bash
? Extensions Firebase √† installer:
  ‚ùØ Firebase Auth UI
  ‚ùØ Firebase Storage
  ‚ùØ Firebase Performance
  ‚ùØ Firebase Analytics
  ‚ùØ Algolia Search
  ‚ùØ Stripe Payments
```

**Extensions populaires :**

- **Firebase Auth UI** : Interface d'authentification pr√™te
- **Algolia Search** : Recherche avanc√©e
- **Stripe Payments** : Paiements en ligne

## üîß Configuration avanc√©e

### Variables d'environnement

Le g√©n√©rateur cr√©e automatiquement les fichiers `.env.local` :

```bash
# .env.local
NEXT_PUBLIC_FIREBASE_API_KEY=your_api_key
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your_project_id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your_project.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
NEXT_PUBLIC_FIREBASE_APP_ID=your_app_id
NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID=your_measurement_id

# Fonctionnalit√©s
NEXT_PUBLIC_ENABLE_PWA=true
NEXT_PUBLIC_ENABLE_FCM=true
NEXT_PUBLIC_ENABLE_ANALYTICS=true
NEXT_PUBLIC_ENABLE_PERFORMANCE=true
NEXT_PUBLIC_ENABLE_SENTRY=true

# Sentry
NEXT_PUBLIC_SENTRY_DSN=your_sentry_dsn
NEXT_PUBLIC_SENTRY_ENVIRONMENT=development

# FCM
NEXT_PUBLIC_VAPID_KEY=your_vapid_key
NEXT_PUBLIC_FCM_PUBLIC_KEY=your_fcm_public_key
```

### Configuration TypeScript

Le g√©n√©rateur configure automatiquement TypeScript avec :

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "lib": ["dom", "dom.iterable", "es6"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./src/*"],
      "@/components/*": ["./src/components/*"],
      "@/hooks/*": ["./src/hooks/*"],
      "@/stores/*": ["./src/stores/*"],
      "@/lib/*": ["./src/lib/*"],
      "@/types/*": ["./src/types/*"],
      "@/utils/*": ["./src/utils/*"]
    }
  }
}
```

### Configuration Next.js

```javascript
// next.config.js
const nextConfig = {
  experimental: {
    appDir: true,
  },
  images: {
    domains: ['firebasestorage.googleapis.com'],
  },
  env: {
    CUSTOM_KEY: 'custom_value',
  },
  // Configuration PWA
  ...(process.env.NEXT_PUBLIC_ENABLE_PWA === 'true' && {
    pwa: {
      dest: 'public',
      register: true,
      skipWaiting: true,
    },
  }),
};

module.exports = nextConfig;
```

## üé® Personnalisation des templates

### Structure des templates

```
templates/
‚îú‚îÄ‚îÄ nextjs/                    # Templates Next.js
‚îÇ   ‚îú‚îÄ‚îÄ app/                   # App Router
‚îÇ   ‚îú‚îÄ‚îÄ components/            # Composants UI
‚îÇ   ‚îú‚îÄ‚îÄ hooks/                 # Hooks personnalis√©s
‚îÇ   ‚îú‚îÄ‚îÄ stores/                # Gestion d'√©tat
‚îÇ   ‚îú‚îÄ‚îÄ lib/                   # Utilitaires
‚îÇ   ‚îî‚îÄ‚îÄ tests/                 # Tests
‚îî‚îÄ‚îÄ firebase/                  # Templates Firebase
    ‚îú‚îÄ‚îÄ functions/             # Cloud Functions
    ‚îú‚îÄ‚îÄ firestore/             # R√®gles et index
    ‚îú‚îÄ‚îÄ storage/               # R√®gles de stockage
    ‚îî‚îÄ‚îÄ scripts/               # Scripts de d√©ploiement
```

### Modification des templates

#### **Ajouter un nouveau composant**

1. Cr√©er le template dans `templates/nextjs/components/`
2. Modifier `src/generators/nextjs-generator.ts`
3. Ajouter la logique de g√©n√©ration

#### **Ajouter une nouvelle fonction Firebase**

1. Cr√©er le template dans `templates/firebase/functions/`
2. Modifier `src/generators/firebase-generator.ts`
3. Ajouter l'export dans `index.ts`

### Variables Handlebars disponibles

```handlebars
{{project.name}}
# Nom du projet
{{project.description}}
# Description du projet
{{project.version}}
# Version du projet
{{project.author}}
# Auteur du projet

{{nextjs.ui}}
# Framework UI (mui/shadcn)
{{nextjs.stateManagement}}
# Gestion d'√©tat (zustand/redux)
{{nextjs.features.pwa}}
# PWA activ√©
{{nextjs.features.fcm}}
# FCM activ√©

{{firebase.environments}}
# Liste des environnements
{{firebase.extensions}}
# Extensions Firebase

{{timestamp}}
# Timestamp de g√©n√©ration
{{year}}
# Ann√©e actuelle
```

## üöÄ D√©ploiement

### 1. Build du projet

```bash
# Build frontend
cd frontend
npm run build

# Build backend (Cloud Functions)
cd ../backend/functions
npm run build
```

### 2. D√©ploiement Firebase

```bash
# D√©ploiement complet
firebase deploy

# D√©ploiement s√©lectif
firebase deploy --only hosting
firebase deploy --only functions
firebase deploy --only firestore:rules
```

### 3. D√©ploiement par environnement

```bash
# D√©ploiement en dev
./scripts/deploy-env.sh dev

# D√©ploiement en staging
./scripts/deploy-env.sh staging

# D√©ploiement en production
./scripts/deploy-env.sh prod
```

### 4. Configuration CI/CD

Le g√©n√©rateur cr√©e automatiquement les workflows GitHub Actions :

```yaml
# .github/workflows/deploy.yml
name: Deploy
on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
      - run: npm ci
      - run: npm run build
      - run: npm run deploy:${{ github.ref_name }}
```

## üß™ Tests et qualit√©

### Tests unitaires

```bash
# Ex√©cution des tests
npm test

# Tests en mode watch
npm run test:watch

# Couverture de code
npm run test:coverage
```

### Tests d'int√©gration

```bash
# Tests Firebase
npm run test:firebase

# Tests Next.js
npm run test:nextjs

# Tests complets
npm run test:all
```

### Qualit√© du code

```bash
# Linting
npm run lint

# V√©rification des types
npm run type-check

# Audit de s√©curit√©
npm audit

# Formatage du code
npm run format
```

## üîç D√©bogage

### Mode verbose

```bash
# Activer le mode verbose
firebase-nextjs-generator create --verbose

# Logs d√©taill√©s
DEBUG=* firebase-nextjs-generator create
```

### Logs et erreurs

```bash
# V√©rifier les logs
tail -f ~/.firebase-nextjs-generator/logs/app.log

# Erreurs courantes
firebase-nextjs-generator create --debug
```

### Validation des templates

```bash
# Valider tous les templates
npm run validate-templates

# Valider un template sp√©cifique
npm run validate-template:nextjs
npm run validate-template:firebase
```

## üìö Exemples d'utilisation

### Exemple 1 : Application e-commerce

```bash
firebase-nextjs-generator create \
  --name ecommerce-app \
  --ui shadcn \
  --state-management zustand \
  --features pwa,fcm,analytics,performance \
  --firebase-extensions stripe,algolia
```

### Exemple 2 : Application de blog

```bash
firebase-nextjs-generator create \
  --name blog-app \
  --ui mui \
  --state-management redux \
  --features pwa,analytics \
  --firebase-extensions firebase-auth-ui
```

### Exemple 3 : Application de chat

```bash
firebase-nextjs-generator create \
  --name chat-app \
  --ui shadcn \
  --state-management zustand \
  --features pwa,fcm,analytics,performance \
  --firebase-extensions firebase-auth-ui
```

## üö® R√©solution des probl√®mes

### Erreurs courantes

#### **Template non trouv√©**

```bash
Error: ENOENT: no such file or directory, open '.../template.hbs'
```

**Solution :**

1. V√©rifier que tous les templates sont pr√©sents
2. Ex√©cuter `npm run validate-templates`
3. R√©g√©n√©rer les templates manquants

#### **Erreur de validation**

```bash
Error: Configuration invalide: [d√©tails de l'erreur]
```

**Solution :**

1. V√©rifier la configuration avec `npm run validate-config`
2. Corriger les erreurs indiqu√©es
3. Relancer la g√©n√©ration

#### **Erreur Firebase**

```bash
Error: Firebase project not found
```

**Solution :**

1. V√©rifier la connexion Firebase : `firebase login`
2. V√©rifier l'ID du projet : `firebase projects:list`
3. V√©rifier les permissions sur le projet

### Support et communaut√©

- **GitHub Issues** : [Signaler un bug](https://github.com/your-username/firebase-nextjs-generator/issues)
- **Discord** : [Communaut√©](https://discord.gg/your-community)
- **Documentation** : [Wiki](https://github.com/your-username/firebase-nextjs-generator/wiki)

## üéâ F√©licitations !

Vous ma√Ætrisez maintenant le G√©n√©rateur Firebase + Next.js 2025 !

**Prochaines √©tapes :**

- [Guide de d√©ploiement](DEPLOYMENT.md) üöÄ
- [Guide de personnalisation](CUSTOMIZATION.md) üé®
- [Guide des bonnes pratiques](BEST_PRACTICES.md) üìö

---

**üí° Astuce :** Utilisez `firebase-nextjs-generator --help` pour d√©couvrir toutes les options disponibles !
